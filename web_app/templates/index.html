<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Holingo | Live Recognition</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" />
        <script src="{{ url_for('static', filename='js/spell-recognition.js') }}" defer></script>
    </head>
    <body>
        <header class="app-header">
            <div class="app-header__inner">
                <div class="brand">Holingo</div>
                <form action="{{ url_for('spells_view') }}" method="get" class="search-bar" role="search" aria-label="Spell search">
                    <input
                        type="search"
                        name="q"
                        placeholder="If you want search function..."
                        aria-label="Search spell name"
                    />
                    <button type="submit">Search</button>
                </form>
                <nav class="nav-links">

                    <a href="{{ url_for('spells_view') }}">Spells</a>
                </nav>
            </div>
        </header>
        <main>
            <section class="live-stack">
                <div class="live-frame">
                    <div class="live-header">
                        <h1>Live Spell Feedback</h1>
                        <p>Animated pixel figure reacts to spells in real time.</p>
                    </div>
                    <div class="viz-placeholder" role="img" aria-label="Spell animation placeholder">
                        <div class="viz-hint">Drop animation sprite here</div>
                    </div>
                    <div class="side-panel">
                        <div class="output-section">
                            <h2>Recognition</h2>
                            <div class="output-window" aria-live="polite">
                                <p id="status-line">Awaiting voice input...</p>
                                {% if spell %}
                                <p id="last-spell-line">
                                    <span class="spell-meta">Spell:</span>
                                    <span id="last-spell-name">{{ spell.spell }}</span>
                                </p>
                                <p id="last-pronunciation-line">
                                    <span class="spell-meta">Pronunciation:</span>
                                    <span id="last-pronunciation-text">{{ spell.pronunciation or "—" }}</span>
                                </p>
                                {% else %}
                                <p id="last-spell-line">
                                    <span class="spell-meta">Spell library:</span> empty
                                </p>
                                <p id="last-pronunciation-line">
                                    <span class="spell-meta">Pronunciation:</span>
                                    <span id="last-pronunciation-text">—</span>
                                </p>
                                {% endif %}
                                <!-- Assessment lines -->
                                <p id="assessment-grade-line" style="display: none;">
                                    <span class="spell-meta">Grade:</span>
                                    <span id="assessment-grade"></span>
                                </p>
                                <p id="assessment-text-line" style="display: none;">
                                    <span class="spell-meta">Recognized as:</span>
                                    <span id="assessment-text"></span>
                                </p>
                            </div>
                        </div>
                        <div class="control-bar">
                            <button type="button" class="voice-trigger">Collect Audio</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        <footer>Developed by Team Assoc.</footer>
    </body>
</html>
